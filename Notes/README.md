Техническое задание: Онлайн‑приложение «Заметки» на Go
1. Введение
Название проекта: Notes.

Цель проекта: разработка масштабируемого веб‑приложения для создания, хранения и управления текстовыми заметками с поддержкой API.

Целевая аудитория:

студенты (конспекты, списки дел);

офисные сотрудники (рабочие задачи, идеи);


все, кто ведёт личный дневник или списки покупок.

2. Архитектура системы
2.1. Основные компоненты
Система состоит из 4 микросервисов:

API Gateway — точка входа для HTTP‑запросов.

Notes Service — основной сервис работы с заметками.

Auth Service — сервис аутентификации и управления пользователями.

Storage Service — сервис хранения данных (файлы + PostgreSQL).

2.2. Взаимодействие компонентов
Клиент → API Gateway → Notes/Auth Service (HTTP).

Notes/Auth Service → Storage Service (локальный вызов или gRPC).

Асинхронные события (например, уведомление о создании заметки) передаются через RabbitMQ.

3. Функциональные требования
3.1. Пользовательский модуль
Регистрация: email, пароль, имя.

Аутентификация: JWT‑токены (access/refresh).

Восстановление пароля: через email.

Управление профилем: имя, аватар, настройки.

3.2. Модуль заметок
Создание заметки: заголовок, текст, теги, приоритет.

Редактирование заметки: обновление полей.

Удаление заметки: с подтверждением.

Просмотр заметки: по ID.

Список заметок: пагинация, сортировка (по дате, алфавиту), фильтрация (по тегам, дате, приоритету).

Поиск: по заголовку и тексту.

Тегирование: добавление/удаление тегов.

Архивация: перенос в архив без удаления.

Восстановление: из архива.

Приоритеты: низкий/средний/высокий.

Сроки выполнения: дата и время.

3.3. API‑интерфейс
RESTful‑эндпоинты.

Поддержка JSON и Protobuf.

Валидация входных данных.

Унифицированные ответы об ошибках.

Пагинация для списков.

3.4. Хранение данных
Первичное хранение: файлы (JSON) для прототипирования.

Основное хранение: PostgreSQL.

Кеширование: Redis (опционально).

Резервное копирование: ежедневное бэкапирование БД.

3.5. Дополнительные функции
Автосохранение: при редактировании.

Экспорт: в PDF, TXT, JSON, Protobuf.

Импорт: из TXT, JSON.

История изменений: версия заметки.

Уведомления: email о новых заметках/сроках.

Офлайн‑режим: кэширование в localStorage (фронтенд).


4. Технологический стек (Go)
Язык: Go 1.21+.

Веб‑фреймворк: Gin или Echo.

БД: PostgreSQL 14+.

Драйвер БД: pgx v5.

Аутентификация: JWT (github.com/dgrijalva/jwt‑go).

Хеширование: golang.org/x/crypto/bcrypt.

Конфигурация: YAML (gopkg.in/yaml.v3).

Валидация: go‑playground/validator.

gRPC: google.golang.org/grpc (опционально).

Брокер сообщений: RabbitMQ (streadway/amqp) (опционально).

Кеширование: go‑redis/redis (опционально).

Тестирование: testing, testify.

Контейнеризация: Docker.

Оркестрация: Docker Compose/Kubernetes (опционально).

CI/CD: GitHub Actions.

5. API‑эндпоинты
5.1. Аутентификация
POST /api/v1/auth/register — регистрация.

POST /api/v1/auth/login — вход.

POST /api/v1/auth/refresh — обновление токена.

POST /api/v1/auth/logout — выход.

GET /api/v1/auth/profile — профиль пользователя.

PUT /api/v1/auth/profile — обновление профиля.

5.2. Заметки
GET /api/v1/notes — список (пагинация, фильтры).

GET /api/v1/notes/{id} — заметка по ID.

POST /api/v1/notes — создание.

PUT /api/v1/notes/{id} — обновление.

DELETE /api/v1/notes/{id} — удаление.

GET /api/v1/notes/archive — архив.

POST /api/v1/notes/{id}/archive — архивация.

POST /api/v1/notes/{id}/restore — восстановление.

5.3. Теги
GET /api/v1/tags — список тегов.

POST /api/v1/notes/{id}/tags — добавление тега.

DELETE /api/v1/notes/{id}/tags/{tag} — удаление тега.

5.4. Экспорт/Импорт
GET /api/v1/notes/{id}/export/{format} — экспорт (format: pdf, txt, json, proto).

POST /api/v1/notes/import — импорт (форматы: txt, json).

